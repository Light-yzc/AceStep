from acestep.handler import AceStepHandler
from acestep.llm_inference import LLMHandler
from acestep.inference import GenerationParams, GenerationConfig, generate_music, understand_music
from acestep.inference import create_sample

# Initialize handlers
dit_handler = AceStepHandler()
llm_handler = LLMHandler()
# # # Initialize services
dit_handler.initialize_service(
    project_root="/content/ACE-Step-1.5",
    config_path="acestep-v15-turbo",
    device="cuda"
)
codes = dit_handler.convert_src_audio_to_codes("/content/ACE-Step-1.5/my_audio/5ede0c55-a20d-151c-120b-5b6d7d3f3da1.mp4")
print(codes) 
llm_handler.initialize(
    checkpoint_dir="/content/ACE-Step-1.5/checkpoints",
    lm_model_path="acestep-5Hz-lm-1.7B",
    # backend="vllm",
    device="cuda"
)
# print(a)


#===create sample

def gen_music(caption):
    result = create_sample(
        llm_handler=llm_handler,
        query=caption,
        instrumental=False,
        vocal_language="ja",  
        temperature=0.85,
    )

    if result.success:
        print(f"Caption: {result.caption}")
        print(f"Lyrics: {result.lyrics}")
        print(f"BPM: {result.bpm}")
        print(f"Duration: {result.duration}s")
        print(f"Key: {result.keyscale}")
        print(f"Is Instrumental: {result.instrumental}")
        
        # Use with generate_music
        params = GenerationParams(
            caption=result.caption,
            lyrics=result.lyrics,
            bpm=result.bpm,
            duration=result.duration,
            keyscale=result.keyscale,
            vocal_language=result.language,
            audio_codes='''<|audio_code_32855|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_50439|><|audio_code_2692|><|audio_code_60987|><|audio_code_7277|><|audio_code_125|><|audio_code_12365|><|audio_code_61031|><|audio_code_4630|><|audio_code_59015|><|audio_code_35573|><|audio_code_4155|><|audio_code_12038|><|audio_code_24523|><|audio_code_27949|><|audio_code_11015|><|audio_code_56181|><|audio_code_36143|><|audio_code_53567|><|audio_code_2086|><|audio_code_9788|><|audio_code_56517|><|audio_code_12451|><|audio_code_1|><|audio_code_1059|><|audio_code_10383|><|audio_code_61678|><|audio_code_19197|><|audio_code_38359|><|audio_code_13100|><|audio_code_12543|><|audio_code_27755|><|audio_code_53376|><|audio_code_1219|><|audio_code_37854|><|audio_code_63637|><|audio_code_702|><|audio_code_2246|><|audio_code_36101|><|audio_code_29277|><|audio_code_25837|><|audio_code_24255|><|audio_code_32589|><|audio_code_11357|><|audio_code_61677|><|audio_code_49099|><|audio_code_1352|><|audio_code_5368|><|audio_code_41220|><|audio_code_10716|><|audio_code_42757|><|audio_code_11|><|audio_code_25367|><|audio_code_12623|><|audio_code_49956|><|audio_code_12854|><|audio_code_15055|><|audio_code_63909|><|audio_code_56557|><|audio_code_8007|><|audio_code_53584|><|audio_code_6329|><|audio_code_7848|><|audio_code_11691|><|audio_code_61636|><|audio_code_54038|><|audio_code_48220|><|audio_code_2751|><|audio_code_25807|><|audio_code_51423|><|audio_code_6203|><|audio_code_39493|><|audio_code_36070|><|audio_code_50044|><|audio_code_32268|><|audio_code_30463|><|audio_code_61703|><|audio_code_6435|><|audio_code_25360|><|audio_code_37379|><|audio_code_2245|><|audio_code_25708|><|audio_code_41679|><|audio_code_28017|><|audio_code_24382|><|audio_code_11844|><|audio_code_25894|><|audio_code_402|><|audio_code_8568|><|audio_code_58656|><|audio_code_5337|><|audio_code_36159|><|audio_code_53519|><|audio_code_13447|><|audio_code_27820|><|audio_code_961|><|audio_code_41453|><|audio_code_2159|><|audio_code_23079|><|audio_code_62831|><|audio_code_3791|><|audio_code_43075|><|audio_code_3687|><|audio_code_33573|><|audio_code_15143|><|audio_code_23235|><|audio_code_63678|><|audio_code_28351|><|audio_code_37664|><|audio_code_53456|><|audio_code_50726|><|audio_code_43459|><|audio_code_27999|><|audio_code_37949|><|audio_code_50308|><|audio_code_15679|><|audio_code_13223|><|audio_code_1594|><|audio_code_11519|><|audio_code_5412|><|audio_code_26815|><|audio_code_22781|><|audio_code_299|><|audio_code_12427|><|audio_code_37624|><|audio_code_7783|><|audio_code_12101|><|audio_code_36351|><|audio_code_27333|><|audio_code_5191|><|audio_code_12517|><|audio_code_61829|><|audio_code_20319|><|audio_code_5149|><|audio_code_38045|><|audio_code_51591|><|audio_code_2188|><|audio_code_14854|><|audio_code_14|><|audio_code_20416|><|audio_code_2316|><|audio_code_63493|><|audio_code_22788|><|audio_code_33756|><|audio_code_37733|><|audio_code_50316|><|audio_code_54526|><|audio_code_13415|><|audio_code_57825|><|audio_code_7879|><|audio_code_6179|><|audio_code_23183|><|audio_code_2702|><|audio_code_35581|><|audio_code_56134|><|audio_code_27758|><|audio_code_52279|><|audio_code_61891|><|audio_code_10215|><|audio_code_61695|><|audio_code_53663|><|audio_code_25655|><|audio_code_7677|><|audio_code_2154|><|audio_code_51138|><|audio_code_61422|><|audio_code_37583|><|audio_code_12807|><|audio_code_27295|><|audio_code_51255|><|audio_code_25374|><|audio_code_343|><|audio_code_6470|><|audio_code_38299|><|audio_code_51238|><|audio_code_39245|><|audio_code_40999|><|audio_code_36095|><|audio_code_52293|><|audio_code_25808|><|audio_code_55103|><|audio_code_35872|><|audio_code_37899|><|audio_code_23228|><|audio_code_1103|><|audio_code_50815|><|audio_code_51904|><|audio_code_54218|><|audio_code_51238|><|audio_code_36309|><|audio_code_61573|><|audio_code_63511|><|audio_code_51295|><|audio_code_25903|><|audio_code_19715|><|audio_code_10717|><|audio_code_12611|><|audio_code_7499|><|audio_code_9796|><|audio_code_26823|><|audio_code_1357|><|audio_code_4846|><|audio_code_11013|><|audio_code_15845|><|audio_code_53643|><|audio_code_9950|><|audio_code_39111|><|audio_code_30295|><|audio_code_48927|><|audio_code_2359|><|audio_code_39398|><|audio_code_2307|><|audio_code_8389|><|audio_code_43596|><|audio_code_19970|><|audio_code_49039|><|audio_code_60974|><|audio_code_28040|><|audio_code_38337|><|audio_code_53251|><|audio_code_61754|><|audio_code_128|><|audio_code_17288|><|audio_code_28232|><|audio_code_35329|><|audio_code_53|><|audio_code_27775|><|audio_code_4345|><|audio_code_51460|><|audio_code_12779|><|audio_code_3837|><|audio_code_10445|><|audio_code_205|><|audio_code_11305|><|audio_code_2237|><|audio_code_30338|><|audio_code_58594|><|audio_code_1|><|audio_code_4236|><|audio_code_30|><|audio_code_15303|><|audio_code_57543|><|audio_code_28043|><|audio_code_2105|><|audio_code_23464|><|audio_code_40834|><|audio_code_39720|><|audio_code_53198|><|audio_code_3735|><|audio_code_13853|><|audio_code_7183|><|audio_code_5383|><|audio_code_53440|><|audio_code_61672|><|audio_code_25088|><|audio_code_33848|><|audio_code_51301|><|audio_code_49237|><|audio_code_52079|><|audio_code_61923|><|audio_code_13605|><|audio_code_39654|><|audio_code_25076|><|audio_code_28230|><|audio_code_56508|><|audio_code_27899|><|audio_code_11748|><|audio_code_58877|><|audio_code_27750|><|audio_code_61678|><|audio_code_15748|><|audio_code_59205|><|audio_code_5287|><|audio_code_21253|><|audio_code_2061|><|audio_code_15146|><|audio_code_32930|><|audio_code_25449|><|audio_code_7467|><|audio_code_35372|><|audio_code_25982|><|audio_code_95|><|audio_code_25850|><|audio_code_39735|><|audio_code_10575|><|audio_code_2351|><|audio_code_53|><|audio_code_50767|><|audio_code_51235|><|audio_code_53306|><|audio_code_51202|><|audio_code_20460|><|audio_code_52911|><|audio_code_38063|><|audio_code_7461|><|audio_code_26129|><|audio_code_2323|><|audio_code_23188|><|audio_code_13257|><|audio_code_26631|><|audio_code_38023|><|audio_code_12439|><|audio_code_35915|><|audio_code_30819|><|audio_code_11785|><|audio_code_24420|><|audio_code_63612|><|audio_code_53643|><|audio_code_7869|><|audio_code_36294|><|audio_code_10058|><|audio_code_13051|><|audio_code_27975|><|audio_code_12579|><|audio_code_24551|><|audio_code_26605|><|audio_code_15119|><|audio_code_5157|><|audio_code_14495|><|audio_code_27653|><|audio_code_8780|><|audio_code_2578|><|audio_code_7533|><|audio_code_52247|><|audio_code_2639|><|audio_code_360|><|audio_code_12492|><|audio_code_14831|><|audio_code_37901|><|audio_code_20456|><|audio_code_37944|><|audio_code_288|><|audio_code_51232|><|audio_code_26231|><|audio_code_48319|><|audio_code_25022|><|audio_code_51137|><|audio_code_13253|><|audio_code_13038|><|audio_code_51772|><|audio_code_61900|><|audio_code_17372|><|audio_code_8428|><|audio_code_12671|><|audio_code_52237|><|audio_code_20963|><|audio_code_53567|><|audio_code_33871|><|audio_code_9933|><|audio_code_38914|><|audio_code_9891|><|audio_code_36671|><|audio_code_2196|><|audio_code_18892|><|audio_code_27799|><|audio_code_1743|><|audio_code_39841|><|audio_code_51014|><|audio_code_22724|><|audio_code_12367|><|audio_code_12224|><|audio_code_1815|><|audio_code_45775|><|audio_code_28415|><|audio_code_17419|><|audio_code_11780|><|audio_code_11298|><|audio_code_23612|><|audio_code_29763|><|audio_code_54968|><|audio_code_581|><|audio_code_52463|><|audio_code_20442|><|audio_code_2298|><|audio_code_27591|><|audio_code_53311|><|audio_code_1472|><|audio_code_25743|><|audio_code_10399|><|audio_code_63301|><|audio_code_56973|><|audio_code_47156|><|audio_code_515|><|audio_code_58622|><|audio_code_7363|><|audio_code_18213|><|audio_code_247|><|audio_code_38872|><|audio_code_27942|><|audio_code_15052|><|audio_code_58652|><|audio_code_10561|><|audio_code_53516|><|audio_code_1600|><|audio_code_29263|><|audio_code_37938|><|audio_code_38343|><|audio_code_10502|><|audio_code_38393|><|audio_code_56297|><|audio_code_23503|><|audio_code_25537|><|audio_code_108|><|audio_code_476|><|audio_code_27207|><|audio_code_35854|><|audio_code_22022|><|audio_code_51207|><|audio_code_26095|><|audio_code_63156|><|audio_code_1134|><|audio_code_61759|><|audio_code_2789|><|audio_code_4108|><|audio_code_54591|><|audio_code_1863|><|audio_code_1727|><|audio_code_27780|><|audio_code_24007|><|audio_code_34243|><|audio_code_52682|><|audio_code_2336|><|audio_code_62148|><|audio_code_2933|><|audio_code_15143|><|audio_code_14971|><|audio_code_15175|><|audio_code_295|><|audio_code_63852|><|audio_code_51268|><|audio_code_51036|><|audio_code_28132|><|audio_code_55975|><|audio_code_12773|><|audio_code_12056|><|audio_code_56553|><|audio_code_51402|><|audio_code_61927|><|audio_code_38547|><|audio_code_27975|><|audio_code_58092|><|audio_code_1191|><|audio_code_7239|><|audio_code_8599|><|audio_code_23140|><|audio_code_51822|><|audio_code_10310|><|audio_code_61647|><|audio_code_51842|><|audio_code_62085|><|audio_code_895|><|audio_code_27836|><|audio_code_50456|><|audio_code_62094|><|audio_code_34811|><|audio_code_12228|><|audio_code_32764|><|audio_code_844|><|audio_code_1487|><|audio_code_40644|><|audio_code_12743|><|audio_code_7885|><|audio_code_14995|><|audio_code_302|><|audio_code_25767|><|audio_code_2349|><|audio_code_2182|><|audio_code_53436|><|audio_code_52930|><|audio_code_25068|><|audio_code_1775|><|audio_code_10623|><|audio_code_10454|><|audio_code_639|><|audio_code_12335|><|audio_code_23427|><|audio_code_14640|><|audio_code_19183|><|audio_code_20171|><|audio_code_7405|><|audio_code_25151|><|audio_code_40815|><|audio_code_9767|><|audio_code_6541|><|audio_code_63617|><|audio_code_15101|><|audio_code_2052|><|audio_code_12740|><|audio_code_49717|><|audio_code_25451|><|audio_code_50469|><|audio_code_56768|><|audio_code_14045|><|audio_code_28216|><|audio_code_24649|><|audio_code_38013|><|audio_code_52774|><|audio_code_52549|><|audio_code_23280|><|audio_code_62941|><|audio_code_2188|><|audio_code_1172|><|audio_code_45094|><|audio_code_11095|><|audio_code_40631|><|audio_code_62309|><|audio_code_58669|><|audio_code_37827|><|audio_code_30943|><|audio_code_53326|><|audio_code_12302|><|audio_code_27751|><|audio_code_38078|><|audio_code_41221|><|audio_code_63830|><|audio_code_53639|><|audio_code_51323|><|audio_code_3117|><|audio_code_40967|><|audio_code_21|><|audio_code_24951|><|audio_code_7950|><|audio_code_374|><|audio_code_16336|><|audio_code_6887|><|audio_code_2619|><|audio_code_25787|><|audio_code_26839|><|audio_code_49925|><|audio_code_2266|><|audio_code_23980|><|audio_code_51524|><|audio_code_54117|><|audio_code_48952|><|audio_code_63481|><|audio_code_26200|><|audio_code_13858|><|audio_code_39022|><|audio_code_40197|><|audio_code_10025|><|audio_code_4893|><|audio_code_25253|><|audio_code_62972|><|audio_code_13477|><|audio_code_50826|><|audio_code_25610|><|audio_code_51596|><|audio_code_11501|><|audio_code_12819|><|audio_code_25354|><|audio_code_51407|><|audio_code_159|><|audio_code_2775|><|audio_code_7807|><|audio_code_657|><|audio_code_61561|><|audio_code_20328|><|audio_code_23401|><|audio_code_7296|><|audio_code_2374|><|audio_code_3727|><|audio_code_60486|><|audio_code_9843|><|audio_code_18559|><|audio_code_52178|><|audio_code_10035|><|audio_code_64|><|audio_code_7020|><|audio_code_27183|><|audio_code_13060|><|audio_code_51491|><|audio_code_36348|><|audio_code_58690|><|audio_code_13636|><|audio_code_39495|><|audio_code_4962|><|audio_code_14891|><|audio_code_51094|><|audio_code_51556|><|audio_code_27927|><|audio_code_61743|><|audio_code_25519|><|audio_code_11934|><|audio_code_38522|><|audio_code_22883|><|audio_code_30949|><|audio_code_15|><|audio_code_6913|><|audio_code_26753|><|audio_code_62763|><|audio_code_7850|><|audio_code_22531|><|audio_code_2047|><|audio_code_61967|><|audio_code_459|><|audio_code_1671|><|audio_code_3871|><|audio_code_48901|><|audio_code_35923|><|audio_code_13827|><|audio_code_55307|><|audio_code_13091|><|audio_code_51210|><|audio_code_10564|><|audio_code_2237|><|audio_code_25862|><|audio_code_12758|><|audio_code_63035|><|audio_code_12623|><|audio_code_11644|><|audio_code_12715|><|audio_code_24711|><|audio_code_63231|><|audio_code_52751|><|audio_code_38124|><|audio_code_30248|><|audio_code_124|><|audio_code_62621|><|audio_code_63131|><|audio_code_38029|><|audio_code_199|><|audio_code_53082|><|audio_code_28632|><|audio_code_38371|><|audio_code_56396|><|audio_code_52673|><|audio_code_15079|><|audio_code_27599|><|audio_code_25327|><|audio_code_53249|><|audio_code_1571|><|audio_code_28|><|audio_code_53501|><|audio_code_12288|><|audio_code_54780|><|audio_code_51246|><|audio_code_62271|><|audio_code_5472|><|audio_code_37572|><|audio_code_61851|><|audio_code_37116|><|audio_code_53667|><|audio_code_9768|><|audio_code_42642|><|audio_code_25601|><|audio_code_31031|><|audio_code_8767|><|audio_code_26987|><|audio_code_12738|><|audio_code_38388|><|audio_code_29699|><|audio_code_60738|><|audio_code_3045|><|audio_code_15005|><|audio_code_36156|><|audio_code_12495|><|audio_code_2115|><|audio_code_33039|><|audio_code_27453|><|audio_code_48983|><|audio_code_55947|><|audio_code_32427|><|audio_code_24691|><|audio_code_52699|><|audio_code_2051|><|audio_code_37887|><|audio_code_41487|><|audio_code_22847|><|audio_code_4936|><|audio_code_52515|><|audio_code_38731|><|audio_code_24174|><|audio_code_11578|><|audio_code_10319|><|audio_code_53615|><|audio_code_55375|><|audio_code_31867|><|audio_code_63513|><|audio_code_56836|><|audio_code_2307|><|audio_code_61759|><|audio_code_10256|><|audio_code_254|><|audio_code_8967|><|audio_code_63931|><|audio_code_53098|><|audio_code_48452|><|audio_code_290|><|audio_code_2402|><|audio_code_10455|><|audio_code_24214|><|audio_code_36933|><|audio_code_30989|><|audio_code_58377|><|audio_code_53273|><|audio_code_14859|><|audio_code_33780|><|audio_code_62623|><|audio_code_28367|><|audio_code_30704|><|audio_code_3109|><|audio_code_33419|><|audio_code_101|><|audio_code_7649|><|audio_code_51200|><|audio_code_4208|><|audio_code_57|><|audio_code_5130|><|audio_code_27903|><|audio_code_6407|><|audio_code_5048|><|audio_code_53684|><|audio_code_2412|><|audio_code_8515|><|audio_code_32059|><|audio_code_21966|><|audio_code_5183|><|audio_code_2052|><|audio_code_50692|><|audio_code_13373|><|audio_code_53477|><|audio_code_17543|><|audio_code_2054|><|audio_code_62|><|audio_code_27789|><|audio_code_2118|><|audio_code_2310|><|audio_code_38083|><|audio_code_9863|><|audio_code_583|><|audio_code_2655|><|audio_code_167|><|audio_code_7711|><|audio_code_2151|><|audio_code_10261|><|audio_code_39547|><|audio_code_32781|><|audio_code_4117|><|audio_code_15893|><|audio_code_57981|><|audio_code_6693|><|audio_code_17933|><|audio_code_63619|><|audio_code_62607|><|audio_code_2108|><|audio_code_60156|><|audio_code_56031|><|audio_code_7219|><|audio_code_25220|><|audio_code_35642|><|audio_code_1124|><|audio_code_13121|><|audio_code_31372|><|audio_code_51716|><|audio_code_5275|><|audio_code_51392|><|audio_code_12933|><|audio_code_2243|><|audio_code_12925|><|audio_code_59731|><|audio_code_9857|><|audio_code_48257|><|audio_code_62072|><|audio_code_53373|><|audio_code_26164|><|audio_code_2731|><|audio_code_9274|><|audio_code_53356|><|audio_code_51361|><|audio_code_18050|><|audio_code_26731|><|audio_code_59011|><|audio_code_49337|><|audio_code_36217|><|audio_code_5391|><|audio_code_53052|><|audio_code_1351|><|audio_code_51490|><|audio_code_41700|><|audio_code_14925|><|audio_code_25293|><|audio_code_53385|><|audio_code_43713|><|audio_code_4622|><|audio_code_62143|><|audio_code_43293|><|audio_code_24770|><|audio_code_10435|><|audio_code_51442|><|audio_code_512|><|audio_code_53028|><|audio_code_7832|><|audio_code_32936|><|audio_code_10404|><|audio_code_25746|><|audio_code_35841|><|audio_code_20129|><|audio_code_14135|><|audio_code_4680|><|audio_code_33400|><|audio_code_14945|><|audio_code_54073|><|audio_code_15142|><|audio_code_11392|><|audio_code_25869|><|audio_code_30541|><|audio_code_25889|><|audio_code_12609|><|audio_code_12157|><|audio_code_14532|><|audio_code_12939|><|audio_code_10258|><|audio_code_12557|><|audio_code_6911|><|audio_code_61513|><|audio_code_10542|><|audio_code_10256|><|audio_code_15160|><|audio_code_15546|><|audio_code_263|><|audio_code_61565|><|audio_code_24067|><|audio_code_41163|><|audio_code_56130|><|audio_code_38503|><|audio_code_14893|><|audio_code_37892|><|audio_code_61478|><|audio_code_13533|><|audio_code_1265|><|audio_code_15114|><|audio_code_53027|><|audio_code_38060|><|audio_code_46213|><|audio_code_48194|><|audio_code_27912|><|audio_code_51168|><|audio_code_11269|><|audio_code_5701|><|audio_code_14650|><|audio_code_30727|><|audio_code_9279|><|audio_code_61485|><|audio_code_51245|><|audio_code_16676|><|audio_code_13157|><|audio_code_23366|><|audio_code_36684|><|audio_code_12436|><|audio_code_63262|><|audio_code_14943|><|audio_code_52679|><|audio_code_51175|><|audio_code_55680|><|audio_code_25509|><|audio_code_63823|><|audio_code_44225|><|audio_code_27559|><|audio_code_26071|><|audio_code_33083|><|audio_code_15456|><|audio_code_63187|><|audio_code_28312|><|audio_code_49923|><|audio_code_26176|><|audio_code_26623|><|audio_code_28041|><|audio_code_23190|><|audio_code_27661|><|audio_code_12327|><|audio_code_14347|><|audio_code_17983|><|audio_code_15367|><|audio_code_2111|><|audio_code_11327|><|audio_code_63107|><|audio_code_36296|><|audio_code_19785|><|audio_code_35328|><|audio_code_5406|><|audio_code_63621|><|audio_code_5571|><|audio_code_51912|><|audio_code_14141|><|audio_code_845|><|audio_code_61419|><|audio_code_53957|><|audio_code_53403|><|audio_code_12898|><|audio_code_29963|><|audio_code_17605|><|audio_code_27660|><|audio_code_22294|><|audio_code_2564|><|audio_code_31015|><|audio_code_51047|><|audio_code_42950|><|audio_code_53385|><|audio_code_52864|><|audio_code_28128|><|audio_code_23296|><|audio_code_379|><|audio_code_1391|><|audio_code_52303|><|audio_code_51271|><|audio_code_56005|><|audio_code_57799|><|audio_code_24816|><|audio_code_28033|><|audio_code_22592|><|audio_code_61420|><|audio_code_1149|><|audio_code_25581|><|audio_code_23882|><|audio_code_38367|><|audio_code_48987|><|audio_code_894|><|audio_code_63311|><|audio_code_2181|><|audio_code_53995|><|audio_code_1963|><|audio_code_26476|><|audio_code_14413|><|audio_code_85|><|audio_code_17415|><|audio_code_38943|><|audio_code_56667|><|audio_code_40683|><|audio_code_2310|><|audio_code_2663|><|audio_code_61179|><|audio_code_12529|><|audio_code_24841|><|audio_code_20010|><|audio_code_12396|><|audio_code_61902|><|audio_code_12821|><|audio_code_51522|><|audio_code_40135|><|audio_code_27999|><|audio_code_12877|><|audio_code_43067|><|audio_code_12315|><|audio_code_52740|><|audio_code_2215|><|audio_code_62539|><|audio_code_255|><|audio_code_13|><|audio_code_48902|><|audio_code_2326|><|audio_code_57|><|audio_code_2247|><|audio_code_12667|><|audio_code_2406|><|audio_code_26239|><|audio_code_87|><|audio_code_53252|><|audio_code_53789|><|audio_code_2602|><|audio_code_10756|><|audio_code_7179|><|audio_code_11274|><|audio_code_51243|><|audio_code_2111|><|audio_code_1786|><|audio_code_12649|><|audio_code_26459|><|audio_code_47213|><|audio_code_6080|><|audio_code_12071|><|audio_code_60334|><|audio_code_30951|><|audio_code_12860|><|audio_code_2065|><|audio_code_19974|><|audio_code_10435|><|audio_code_59395|><|audio_code_3053|><|audio_code_26119|><|audio_code_52413|><|audio_code_9027|><|audio_code_25732|><|audio_code_1741|><|audio_code_26754|><|audio_code_7326|><|audio_code_6184|><|audio_code_63068|><|audio_code_10|><|audio_code_5863|><|audio_code_52783|><|audio_code_36680|><|audio_code_13092|><|audio_code_33166|><|audio_code_4766|><|audio_code_28415|><|audio_code_18127|><|audio_code_10389|><|audio_code_38395|><|audio_code_51416|><|audio_code_45407|><|audio_code_10837|><|audio_code_6916|><|audio_code_26241|><|audio_code_1403|><|audio_code_32505|><|audio_code_63713|><|audio_code_44398|><|audio_code_23371|><|audio_code_63557|><|audio_code_12419|><|audio_code_51378|><|audio_code_62295|><|audio_code_36056|><|audio_code_15271|><|audio_code_32434|><|audio_code_3663|><|audio_code_2058|><|audio_code_35914|><|audio_code_38210|><|audio_code_28417|><|audio_code_16273|><|audio_code_26105|><|audio_code_33049|><|audio_code_62277|><|audio_code_28113|><|audio_code_20025|><|audio_code_63815|><|audio_code_2375|><|audio_code_20159|><|audio_code_11341|><|audio_code_1135|><|audio_code_58950|><|audio_code_6672|><|audio_code_51268|><|audio_code_40242|><|audio_code_34128|><|audio_code_63312|><|audio_code_2512|><|audio_code_53491|><|audio_code_2151|><|audio_code_7232|><|audio_code_45570|><|audio_code_61807|><|audio_code_35777|><|audio_code_50406|><|audio_code_40024|><|audio_code_687|><|audio_code_38890|><|audio_code_20373|><|audio_code_36184|><|audio_code_58875|><|audio_code_63546|><|audio_code_30367|><|audio_code_2431|><|audio_code_12547|><|audio_code_3063|><|audio_code_59661|><|audio_code_17790|><|audio_code_62614|><|audio_code_27664|><|audio_code_57856|><|audio_code_61000|><|audio_code_52464|><|audio_code_2744|><|audio_code_63224|><|audio_code_12028|><|audio_code_26|><|audio_code_18016|><|audio_code_2160|><|audio_code_38440|><|audio_code_4707|><|audio_code_57730|><|audio_code_27944|><|audio_code_53403|><|audio_code_11557|><|audio_code_2375|><|audio_code_1995|><|audio_code_5311|><|audio_code_3604|><|audio_code_24840|><|audio_code_34953|><|audio_code_23106|><|audio_code_55812|><|audio_code_24496|><|audio_code_15067|><|audio_code_32939|><|audio_code_53269|><|audio_code_56579|><|audio_code_13031|><|audio_code_40831|><|audio_code_37223|><|audio_code_11419|><|audio_code_51717|><|audio_code_46018|><|audio_code_61610|><|audio_code_53112|><|audio_code_54924|><|audio_code_20167|><|audio_code_11835|><|audio_code_56265|><|audio_code_11332|><|audio_code_50302|><|audio_code_26756|><|audio_code_59712|><|audio_code_52290|><|audio_code_7407|><|audio_code_23367|><|audio_code_26581|><|audio_code_17638|><|audio_code_30025|><|audio_code_55917|><|audio_code_10469|><|audio_code_12601|><|audio_code_56000|><|audio_code_54155|><|audio_code_9735|><|audio_code_1837|><|audio_code_10575|><|audio_code_20431|><|audio_code_36057|><|audio_code_32903|><|audio_code_14073|><|audio_code_37053|><|audio_code_12968|><|audio_code_61735|><|audio_code_5221|><|audio_code_7488|><|audio_code_32316|><|audio_code_25091|><|audio_code_52837|><|audio_code_2760|><|audio_code_31805|><|audio_code_20037|><|audio_code_27714|><|audio_code_33024|><|audio_code_61052|><|audio_code_53295|><|audio_code_11069|><|audio_code_12077|><|audio_code_38115|><|audio_code_56461|><|audio_code_37570|><|audio_code_11969|><|audio_code_27772|><|audio_code_7229|><|audio_code_43706|><|audio_code_10448|><|audio_code_40107|><|audio_code_2124|><|audio_code_769|><|audio_code_4679|><|audio_code_782|><|audio_code_2247|><|audio_code_56668|><|audio_code_2141|><|audio_code_13033|><|audio_code_11359|><|audio_code_16760|><|audio_code_25762|><|audio_code_27|><|audio_code_25650|><|audio_code_41289|><|audio_code_548|><|audio_code_63607|><|audio_code_40458|><|audio_code_48969|><|audio_code_58965|><|audio_code_39981|><|audio_code_26799|><|audio_code_5454|><|audio_code_13026|><|audio_code_61509|><|audio_code_14014|><|audio_code_9286|><|audio_code_2307|><|audio_code_53290|><|audio_code_181|><|audio_code_1151|><|audio_code_57546|><|audio_code_3032|><|audio_code_19435|><|audio_code_61864|><|audio_code_49085|><|audio_code_61712|><|audio_code_2304|><|audio_code_28964|><|audio_code_10379|><|audio_code_40800|><|audio_code_61826|><|audio_code_16746|><|audio_code_23758|><|audio_code_3320|><|audio_code_145|><|audio_code_14074|><|audio_code_20361|><|audio_code_27915|><|audio_code_39738|><|audio_code_52076|><|audio_code_48939|><|audio_code_2243|><|audio_code_36131|><|audio_code_35691|><|audio_code_12483|><|audio_code_2179|><|audio_code_53443|><|audio_code_40643|><|audio_code_53347|><|audio_code_56522|><|audio_code_17707|><|audio_code_29484|><|audio_code_25858|><|audio_code_52547|><|audio_code_10540|><|audio_code_50531|><|audio_code_63916|><|audio_code_26052|><|audio_code_20420|><|audio_code_49091|><|audio_code_5572|><|audio_code_51652|><|audio_code_37316|><|audio_code_26060|><|audio_code_62916|><|audio_code_35268|><|audio_code_13284|><|audio_code_15341|><|audio_code_14317|><|audio_code_51708|><|audio_code_25415|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_35847|><|audio_code_27807|>'''
        )
    else:
        print(f"Error: {result.error}")

    # ====



    # Configure generation settings
    config = GenerationConfig(
        batch_size=2,
        audio_format="mp3",
    )

    # Generate music
    result = generate_music(dit_handler, llm_handler, params, config, save_dir="/content/output")

    # Access results
    if result.success:
        for audio in result.audios:
            print(f"Generated: {audio['path']}")
            print(f"Key: {audio['key']}")
            print(f"Seed: {audio['params']['seed']}")
    else:
        print(f"Error: {result.error}")

# def audio_to_text(path):
prompt = 'An explosive fusion of J-rock and speed metal, driven by hyper-fast, harmonized guitar arpeggios and relentless double-bass drumming. A high-pitched, synthesized female vocal, characteristic of Vocaloid software, delivers a rapid-fire melody over the dense instrumentation. The arrangement is packed with technical guitar solos featuring shredding and sweep-picking, alongside chiptune-esque synth leads that add a digital, video-game-like texture. The track maintains an intense, high-energy pace throughout, with a brief, slightly more melodic bridge offering a momentary shift before launching into a final, climactic guitar and synth-driven outro.'
gen_music(prompt)